const express = require('express');
const cors = require('cors');
const bodyParser = require('body-parser');
require('dotenv').config();

const app = express();
app.use(cors({ origin: process.env.FRONTEND_URL || 'http://localhost:5173' }));
app.use(bodyParser.json());

const coursesRoute = require('./routes/courses');
const checkoutRoute = require('./routes/checkout');
const aiRoute = require('./routes/ai');

app.use('/api/courses', coursesRoute);
app.use('/api/checkout', checkoutRoute);
app.use('/api/ai', aiRoute);

app.get('/api/health', (req,res)=> res.json({ok:true, ts: Date.now()}));

const PORT = process.env.PORT || 4000;
app.listen(PORT, ()=> console.log(`Backend listening on ${PORT}`));

{
  "name": "pp-frontend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "axios": "^1.4.0"
  },
  "devDependencies": {
    "vite": "^5.1.0"
  }
}
{
  "name": "pp-backend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "dotenv": "^16.0.3",
    "stripe": "^12.0.0",
    "body-parser": "^1.20.2",
    "openai": "^4.10.0",
    "pg": "^8.11.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.22"
  }
}

